{"version":3,"sources":["../../js/main.js"],"names":["$","document","ready","Myclock","clock","ctx","cX","cY","R","buffer","now","Date","time","ms","getMilliseconds","s","getSeconds","m","getMinutes","h","getHours","position","sec","x","y","min","hrs","angleS","angleM","angleH","drawClockBody","save","beginPath","lineWidth","strokeStyle","arc","Math","PI","fill","stroke","restore","drawClockFace","fillStyle","i","angle","dx","cos","dy","sin","font","textAlign","textBaseline","fillText","drawSeconds","moveTo","lineTo","drawMinutes","lineCap","drawHours","init","canvasId","length","getElementById","console","error","width","height","getContext","offsetLeft","offsetTop","getImageData","setInterval","update","putImageData","myclock"],"mappings":"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","file":"main.js","sourcesContent":["$(document).ready(function () {\r\n\r\n    let Myclock = function(){\r\n\r\n        let clock,ctx,cX,cY,R;\r\n        let buffer = null;\r\n        let now = new Date();\r\n        let time = {\r\n            ms:now.getMilliseconds(),\r\n            s:now.getSeconds(),\r\n            m:now.getMinutes(),\r\n            h:now.getHours()\r\n        };\r\n        let position = {\r\n            sec:{\r\n                x:null,\r\n                y:null\r\n            },\r\n            min:{\r\n                x:null,\r\n                y:null\r\n            },\r\n            hrs:{\r\n                x:null,\r\n                y:null\r\n            }\r\n        };\r\n        let angleS,angleM, angleH;\r\n\r\n        function drawClockBody(){\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.lineWidth = \"12\";\r\n            ctx.strokeStyle = \"#622D03\";\r\n            ctx.arc(cX,cY,R,0,Math.PI*2);\r\n            ctx.fill();\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawClockFace(){\r\n            ctx.save();\r\n            ctx.lineWidth = 6;\r\n            ctx.strokeStyle = 'gray';\r\n            ctx.fillStyle = \"#333\";\r\n            for(let i = 1; i < 61; i++){\r\n                ctx.beginPath();\r\n                let angle = i * Math.PI / 30 - Math.PI / 2;\r\n                let dx =  Math.cos(angle) * R;\r\n                let dy =  Math.sin(angle) * R;\r\n                if(i%15 == 0){\r\n                    ctx.font = '19px Tahoma';\r\n                    ctx.textAlign = 'center';\r\n                    ctx.textBaseline = \"middle\";\r\n                    ctx.fillStyle = \"#A9B7C6\";\r\n                    ctx.fillText(i/5, cX + dx*0.9, cY + dy*0.9);\r\n                }else if(i%5 == 0){\r\n                    ctx.lineWidth = 1;\r\n                    ctx.arc(cX + 0.9 * dx, cY + 0.9 * dy,1.5,360,0);\r\n                    ctx.fill();\r\n                }else{\r\n                    ctx.lineWidth = 1;\r\n                    ctx.arc(cX + 0.9 * dx, cY + 0.9 * dy,0.5,360,0);\r\n                    ctx.fill();\r\n                }\r\n                ctx.stroke();\r\n            }\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawSeconds(){\r\n            ctx.save();\r\n            angleS = (time.s + time.ms * 0.001) * Math.PI/30 - Math.PI/2;\r\n            position.sec.x = cX + Math.cos(angleS) * R * 0.88;\r\n            position.sec.y = cY + Math.sin(angleS) * R * 0.88;\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = \"#DB1E00\";\r\n            ctx.moveTo(cX,cY);\r\n            ctx.lineTo(position.sec.x,position.sec.y);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawMinutes(){\r\n            ctx.save();\r\n            angleM = (time.m + time.s/60) * Math.PI/30 - Math.PI/2;\r\n            position.min.x = cX + Math.cos(angleM) * R * 0.66;\r\n            position.min.y = cY + Math.sin(angleM) * R * 0.66;\r\n            ctx.beginPath();\r\n            ctx.lineWidth = 4;\r\n            ctx.strokeStyle = \"#BC902D\";\r\n            ctx.lineCap = 'round';\r\n            ctx.moveTo(cX,cY);\r\n            ctx.lineTo(position.min.x,position.min.y);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawHours(){\r\n            ctx.save();\r\n            angleH = (time.h + time.m/60) * Math.PI/6 - Math.PI/2;\r\n            position.hrs.x = cX + Math.cos(angleH) * R * 0.33;\r\n            position.hrs.y = cY + Math.sin(angleH) * R * 0.33;\r\n            ctx.beginPath();\r\n            ctx.lineWidth = 9;\r\n            ctx.strokeStyle = \"#F18F08\";\r\n            ctx.lineCap = 'round';\r\n            ctx.moveTo(cX,cY);\r\n            ctx.lineTo(position.hrs.x,position.hrs.y);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n\r\n        function init(canvasId){\r\n            if (canvasId && canvasId.length > 0) {\r\n                clock = document.getElementById(canvasId);\r\n                if(clock === null){\r\n                    console.error('Myclock init error: элемент canvas с id = \"' + canvasId + '\" не найден');\r\n                    return -1;\r\n                }\r\n            }else{\r\n                console.error('Myclock init error: не задан идентификатор холста');\r\n                return -1;\r\n            }\r\n            clock.width = 400;\r\n            clock.height = 400;\r\n            ctx = clock.getContext('2d');\r\n            cX = clock.offsetLeft + clock.width / 2;\r\n            cY = clock.offsetTop + clock.height /2;\r\n            R = 150;\r\n\r\n            drawClockBody();\r\n            drawClockFace();\r\n            buffer = ctx.getImageData(0, 0, clock.width, clock.height);\r\n            setInterval(update,10);\r\n        }\r\n\r\n        function update(){\r\n            now = new Date();\r\n            time.ms = now.getMilliseconds();\r\n            time.h = now.getHours();\r\n            time.m = now.getMinutes();\r\n            time.s = now.getSeconds();\r\n            ctx.putImageData(buffer,0,0);\r\n            drawSeconds();\r\n            drawMinutes();\r\n            drawHours();\r\n        }\r\n\r\n        this.init = init;\r\n    };\r\n\r\n    let myclock = new Myclock();\r\n    myclock.init(\"clock\");\r\n\r\n});\r\n"]}